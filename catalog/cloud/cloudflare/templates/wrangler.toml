name = "my-conductor-project"
main = "src/index.ts"
compatibility_date = "2025-10-29"

# ==================== Durable Objects ====================
# Required for stateful workflows, async execution tracking, and HITL
[[durable_objects.bindings]]
name = "EXECUTION_STATE"
class_name = "ExecutionState"
script_name = "my-conductor-project"

[[durable_objects.bindings]]
name = "HITL_STATE"
class_name = "HITLState"
script_name = "my-conductor-project"

[[migrations]]
tag = "v1"
new_classes = ["ExecutionState", "HITLState"]

# ==================== Cloudflare Bindings ====================
# KV for caching and fast lookups
kv_namespaces = [
  { binding = "CACHE", id = "your-kv-namespace-id", preview_id = "your-preview-kv-id" }
]

# D1 database for long-term memory
[[d1_databases]]
binding = "DB"
database_name = "conductor-db"
database_id = "your-d1-database-id"

# Vectorize for semantic memory (RAG)
[[vectorize]]
binding = "VECTORIZE"
index_name = "conductor-embeddings"

# Hyperdrive bindings for external databases
# Each Hyperdrive binding can connect to Postgres, MySQL, or MariaDB
[[hyperdrive]]
binding = "PRODUCTION_DB"
id = "your-hyperdrive-id-production"
# For production database queries (read-only recommended)

[[hyperdrive]]
binding = "ANALYTICS_DB"
id = "your-hyperdrive-id-analytics"
# For analytics and reporting queries

[[hyperdrive]]
binding = "DATA_WAREHOUSE"
id = "your-hyperdrive-id-warehouse"
# For data warehouse queries

# AI binding for Think members
[ai]
binding = "AI"

# ==================== Environment Variables ====================
[vars]
ENVIRONMENT = "development"
# Optional: API key authentication (comma-separated)
# API_KEYS = "key1,key2,key3"
# ALLOW_ANONYMOUS = "false"
# DISABLE_LOGGING = "false"

# ==================== Scheduled Triggers (Cron) ====================
# Add cron expressions from your ensemble schedules here
# To get all cron expressions: GET /api/v1/schedules/crons/list
[triggers]
crons = [
  # Example schedules (configure based on your ensembles)
  # "0 9 * * *",      # Daily at 9 AM UTC
  # "0 */4 * * *",    # Every 4 hours
  # "*/15 * * * *"    # Every 15 minutes
]
