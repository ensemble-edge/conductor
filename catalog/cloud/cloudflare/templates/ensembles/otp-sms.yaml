name: otp-sms
description: |
  Send one-time password (OTP) via SMS.
  Demonstrates:
  - SMS member with Twilio
  - Environment variable secrets
  - Template rendering with variables

members:
  - name: send-otp
    type: SMS
    config:
      provider:
        provider: twilio
        twilio:
          accountSid: ${env.TWILIO_ACCOUNT_SID}
          authToken: ${env.TWILIO_AUTH_TOKEN}
        from: ${env.TWILIO_PHONE_NUMBER}

flow:
  - member: send-otp
    input:
      to: ${input.phone}
      body: "Your verification code is: {{code}}. It will expire in {{expiryMinutes}} minutes."
      data:
        code: ${input.otp}
        expiryMinutes: 5

output:
  messageId: ${send-otp.output.messageId}
  status: ${send-otp.output.status}
  timestamp: ${send-otp.output.timestamp}
