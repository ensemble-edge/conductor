name: sitemap
operation: page
templateEngine: liquid
description: XML sitemap for search engines

# The component content (must be at root level, not nested in config)
component: |
  <?xml version="1.0" encoding="UTF-8"?>
  <urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
    {% for url in urls %}
    <url>
      <loc>{{url.loc}}</loc>
      {% if url.lastmod %}
      <lastmod>{{url.lastmod}}</lastmod>
      {% endif %}
      {% if url.changefreq %}
      <changefreq>{{url.changefreq}}</changefreq>
      {% endif %}
      {% if url.priority %}
      <priority>{{url.priority}}</priority>
      {% endif %}
    </url>
    {% endfor %}
  </urlset>

# Page configuration (all properties at root level, no config wrapper)
route:
  path: /sitemap.xml
  methods: [GET]
  auth: none

renderMode: static

contentType: application/xml

cache:
  enabled: true
  ttl: 3600  # 1 hour

# Default URLs - typically generated dynamically from your pages/content
input:
  urls:
    - loc: ${env.PUBLIC_URL}/
      lastmod: ${new Date().toISOString().split('T')[0]}
      changefreq: daily
      priority: 1.0

    - loc: ${env.PUBLIC_URL}/dashboard
      lastmod: ${new Date().toISOString().split('T')[0]}
      changefreq: weekly
      priority: 0.8

    - loc: ${env.PUBLIC_URL}/login
      changefreq: monthly
      priority: 0.5

# To generate sitemap dynamically from your content:
# 1. Use a Data agent to query your content
# 2. Map results to sitemap URL format
# 3. Pass to this page agent
