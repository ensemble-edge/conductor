---
"@ensemble-edge/conductor": patch
---

## Architecture Improvements

### Simplified HITL Callback API

Redesigned the HITL workflow resumption system with a cleaner 2-endpoint design:

- `POST /callback/:token` - Resume suspended workflow with body `{ approved: true/false, feedback?, reason? }`
- `GET /callback/:token` - Get token metadata without consuming it

**Breaking change from v0.4.5**: The previous `/callbacks/resume/:token`, `/callbacks/approve/:token`, and `/callbacks/reject/:token` endpoints have been consolidated into a single `/callback/:token` endpoint.

### Configurable Callback Base Path

New `APIConfig.hitl.resumeBasePath` option allows customizing the callback endpoint path:

```typescript
createConductorAPI({
  hitl: {
    resumeBasePath: '/resume' // Results in POST /resume/:token
  }
})
```

Default is `/callback`.

### Cleaned Up Webhook Routes

- Removed legacy broken `/webhooks/trigger/:ensembleName` endpoint
- `/webhooks` now only lists registered webhook endpoints
- Users own the `/webhooks/*` namespace for their trigger paths

## Bug Fixes

- Changed generic "Invalid API key" error to "Invalid credentials" for improved security

## Documentation & Examples

- Updated HITL docs with simplified callback URL examples
- Updated catalog templates to use recommended `/webhooks/*` prefix for webhook triggers

## Tests

- Added 14 new callback route integration tests
- Added 8 new webhook route integration tests
